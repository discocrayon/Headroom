# Auto-generated SCP Terraform configuration for Organization Root
# Generated by Headroom based on compliance analysis

module "scps_root" {
  source = "../modules/scps"
  target_id = local.root_ou_id

  # EC2
  deny_ec2_ami_owner = true
  ec2_allowed_ami_owners = []
  deny_ec2_imds_v1 = false

  # EKS
  deny_eks_create_cluster_without_tag = true

  # IAM
  deny_iam_saml_provider_not_aws_sso = true
  deny_iam_user_creation = true
  iam_allowed_users = [
    "arn:aws:iam::${local.fort_knox_account_id}:user/service/github-actions",
    "arn:aws:iam::${local.security_tooling_account_id}:user/automation/cicd-deployer",
    "arn:aws:iam::${local.acme_co_account_id}:user/contractors/temp-contractor",
    "arn:aws:iam::${local.acme_co_account_id}:user/terraform-user",
    "arn:aws:iam::${local.shared_foo_bar_account_id}:user/legacy-developer",
  ]

  # RDS
  deny_rds_unencrypted = false
}
